"use strict";(self.webpackChunkab_ui_library=self.webpackChunkab_ui_library||[]).push([[5625],{"./src/components/FormContainer/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>FormContainer});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),context=__webpack_require__("./src/context/index.ts"),Button=__webpack_require__("./src/components/Button/index.ts"),yup_index_esm=__webpack_require__("./node_modules/yup/index.esm.js"),yup=__webpack_require__("./node_modules/@hookform/resolvers/yup/dist/yup.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var FormContainer=function FormContainer(props){var children=props.children,_props$className=props.className,className=void 0===_props$className?"":_props$className,shouldUnregister=props.shouldUnregister,_props$shouldFocusErr=props.shouldFocusError,shouldFocusError=void 0===_props$shouldFocusErr||_props$shouldFocusErr,_props$mode=props.mode,mode=void 0===_props$mode?"onBlur":_props$mode,initialValues=props.initialValues,validationScheme=props.validationScheme,validationContext=props.validationContext,buttonConfigs=props.buttonConfigs,formId=props.formId,onSubmit=props.onSubmit,_useForm=(0,index_esm.mN)({mode,defaultValues:initialValues,shouldFocusError,shouldUnregister,resolver:(0,yup.t)(validationScheme)}),handleSubmit=_useForm.handleSubmit,register=_useForm.register,setValue=_useForm.setValue,control=_useForm.control,formState=_useForm.formState,getValues=_useForm.getValues,watch=_useForm.watch,reset=_useForm.reset,trigger=_useForm.trigger,clearErrors=_useForm.clearErrors,setError=_useForm.setError,getFieldState=_useForm.getFieldState,unregister=_useForm.unregister,errors=formState.errors,isDirty=formState.isDirty,isSubmitted=formState.isSubmitted,isSubmitting=formState.isSubmitting,dirtyFields=formState.dirtyFields,validateForm=function(){var _ref=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(validationScheme){_context.next=2;break}return _context.abrupt("return",!0);case 2:return _context.prev=2,_context.next=5,validationScheme.validate(getValues(),{abortEarly:!1,context:validationContext});case 5:return _context.abrupt("return",!0);case 8:return _context.prev=8,_context.t0=_context.catch(2),_context.t0 instanceof yup_index_esm.yI&&_context.t0.inner.forEach((function(err){err.path&&setError(err.path,{type:"manual",message:err.message})})),_context.abrupt("return",!1);case 12:case"end":return _context.stop()}}),_callee,null,[[2,8]])})));return function validateForm(){return _ref.apply(this,arguments)}}(),customTrigger=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",validateForm());case 1:case"end":return _context2.stop()}}),_callee2)})));return function customTrigger(){return _ref2.apply(this,arguments)}}(),customSubmit=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(data){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,validateForm();case 2:if(_context3.sent){_context3.next=5;break}return _context3.abrupt("return");case 5:onSubmit&&onSubmit(data,formState,dirtyFields);case 6:case"end":return _context3.stop()}}),_callee3)})));return function customSubmit(_x){return _ref3.apply(this,arguments)}}();return(0,jsx_runtime.jsx)("form",{onSubmit:handleSubmit(customSubmit),id:formId,className:classnames_default()("form-container",className),children:(0,jsx_runtime.jsx)(context.c.Provider,{value:{trigger:"onSubmit"===mode?customTrigger:trigger,register,errors,control,setValue,getValues,watch,reset,isDirty,isSubmitted,isSubmitting,isValid:formState.isValid,clearErrors,setError,dirtyFields,getFieldState,unregister},children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children,buttonConfigs&&(0,jsx_runtime.jsx)("div",{className:"form-container__buttons",children:buttonConfigs.map((function(buttonConfig,index){return(0,react.createElement)(Button.$,_objectSpread(_objectSpread({},buttonConfig),{},{key:index}))}))})]})})})};FormContainer.displayName="FormContainer",FormContainer.__docgenInfo={description:"",methods:[],displayName:"FormContainer",props:{className:{required:!1,tsType:{name:"string"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: TFormData, formState: FormState<TFormData>, dirtyFields?: TDirtyFields) => void",signature:{arguments:[{type:{name:"TFormData"},name:"data"},{type:{name:"FormState",elements:[{name:"TFormData"}],raw:"FormState<TFormData>"},name:"formState"},{type:{name:"Partial",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:"{ [x: string]: unknown }",signature:{properties:[{key:{name:"string"},value:{name:"unknown",required:!0}}]}}],raw:"Readonly<{ [x: string]: unknown }>"}],raw:"Partial<Readonly<{ [x: string]: unknown }>>"},name:"dirtyFields"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},validationScheme:{required:!0,tsType:{name:"AnyObjectSchema"},description:""},validationContext:{required:!1,tsType:{name:"unknown"},description:""},initialValues:{required:!0,tsType:{name:"TFormData"},description:""},buttonConfigs:{required:!1,tsType:{name:"Array",elements:[{name:"TButtonPropTypes"}],raw:"TButtonPropTypes[]"},description:""},shouldUnregister:{required:!1,tsType:{name:"boolean"},description:""},shouldFocusError:{required:!1,tsType:{name:"boolean"},description:""},mode:{required:!1,tsType:{name:"ValidationMode"},description:""},reValidateMode:{required:!1,tsType:{name:"union",raw:"'onChange' | 'onSubmit' | 'onBlur' | undefined",elements:[{name:"literal",value:"'onChange'"},{name:"literal",value:"'onSubmit'"},{name:"literal",value:"'onBlur'"},{name:"undefined"}]},description:""},formId:{required:!1,tsType:{name:"string"},description:""}}}},"./src/components/FormField/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>FormField});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/@hookform/error-message/dist/index.esm.js"),helperComponents=__webpack_require__("./src/helperComponents/index.ts"),context=__webpack_require__("./src/context/index.ts"),dist_index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var FormField=function FormField(props){var As=props.As,name=props.name,_props$className=props.className,className=void 0===_props$className?"":_props$className,_props$dataId=props.dataId,dataId=void 0===_props$dataId?"":_props$dataId,_props$hideErrorMessa=props.hideErrorMessage,hideErrorMessage=void 0!==_props$hideErrorMessa&&_props$hideErrorMessa,errorMessageIcon=props.errorMessageIcon,_useContext=(0,react.useContext)(context.c),register=_useContext.register,errors=_useContext.errors,setValue=_useContext.setValue,control=_useContext.control;if(!register)return null;var registerOptions=register(name);return(0,jsx_runtime.jsx)("div",{className:classnames_default()("form-container__field",className,name),children:(0,jsx_runtime.jsx)(dist_index_esm.xI,{control,name,render:function render(_ref){var field=_ref.field,fieldState=_ref.fieldState;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[As(_objectSpread(_objectSpread({hasError:!!fieldState.error,isValid:fieldState.isTouched&&fieldState.isDirty&&!fieldState.invalid,dataId},registerOptions),{},{setFieldValue:function setFieldValue(data,name,options){return setValue(data,name,_objectSpread({shouldValidate:!0,shouldDirty:!0,shouldTouch:!0},options))}},field)),hideErrorMessage?null:(0,jsx_runtime.jsx)(index_esm.K,{name,errors,render:function render(_ref2){var message=_ref2.message;return(0,jsx_runtime.jsx)(helperComponents.Kw,{dataId,message:message||"",className:"full-width mt-8",icon:errorMessageIcon})}})]})}})})};FormField.displayName="FormField",FormField.__docgenInfo={description:"",methods:[],displayName:"FormField",props:{As:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: IFormCompProps) => JSX.Element",signature:{arguments:[{type:{name:"IFormCompProps"},name:"props"}],return:{name:"JSX.Element"}}},description:""},name:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},dataId:{required:!1,tsType:{name:"string"},description:""},hideErrorMessage:{required:!1,tsType:{name:"boolean"},description:""},errorMessageIcon:{required:!1,tsType:{name:"string"},description:""}}}},"./src/components/MultiTextareaWithChips/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fx:()=>MultiTextareaWithChips});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),esm_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/typeof.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),Chips=__webpack_require__("./src/components/Chips/index.ts"),helperComponents=__webpack_require__("./src/helperComponents/index.ts"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),hooks=__webpack_require__("./src/hooks/index.ts"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var MultiTextareaWithChipsComponent=function MultiTextareaWithChipsComponent(_ref){var label=_ref.label,placeholder=_ref.placeholder,helperText=_ref.helperText,_ref$chips=_ref.chips,chips=void 0===_ref$chips?[]:_ref$chips,onAddChip=_ref.onAddChip,onRemoveChip=_ref.onRemoveChip,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$availableOptions=_ref.availableOptions,availableOptions=void 0===_ref$availableOptions?[]:_ref$availableOptions,_ref$allowCustomValue=_ref.allowCustomValues,allowCustomValues=void 0===_ref$allowCustomValue||_ref$allowCustomValue,_ref$allowDuplicates=_ref.allowDuplicates,allowDuplicates=void 0!==_ref$allowDuplicates&&_ref$allowDuplicates,searchPlaceholder=_ref.searchPlaceholder,chipValidationSchema=_ref.chipValidationSchema,chipValidationErrorMessage=_ref.chipValidationErrorMessage,_ref$allowInvalidChip=_ref.allowInvalidChips,allowInvalidChips=void 0!==_ref$allowInvalidChip&&_ref$allowInvalidChip,_ref$searchPlaceholde=_ref.searchPlaceholderText,searchPlaceholderText=void 0===_ref$searchPlaceholde?"Search and select...":_ref$searchPlaceholde,_ref$typeAndEnterPlac=_ref.typeAndEnterPlaceholderText,typeAndEnterPlaceholderText=void 0===_ref$typeAndEnterPlac?"Type and press Enter...":_ref$typeAndEnterPlac,_ref$noOptionsPlaceho=_ref.noOptionsPlaceholderText,noOptionsPlaceholderText=void 0===_ref$noOptionsPlaceho?"No more options available":_ref$noOptionsPlaceho,_ref$fieldName=_ref.fieldName,fieldName=void 0===_ref$fieldName?"skills":_ref$fieldName,formProps=_ref.formProps,minChipLength=_ref.minChipLength,maxChipLength=_ref.maxChipLength,onBlurConfig=_ref.onBlurConfig,_ref$transformToUpper=_ref.transformToUppercase,transformToUppercase=void 0!==_ref$transformToUpper&&_ref$transformToUpper,_useState=(0,react.useState)(""),_useState2=(0,slicedToArray.A)(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1],_useState3=(0,react.useState)(""),_useState4=(0,slicedToArray.A)(_useState3,2),chipError=_useState4[0],setChipError=_useState4[1],inputRef=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),chipManagement=function useChipManagement(_ref){var initialChips=_ref.initialChips,fieldName=_ref.fieldName,formProps=_ref.formProps,setValue=_ref.setValue,onAddChip=_ref.onAddChip,onRemoveChip=_ref.onRemoveChip,_useState=(0,react.useState)(initialChips),_useState2=(0,slicedToArray.A)(_useState,2),chips=_useState2[0],setChips=_useState2[1],isUserInteraction=(0,react.useRef)(!1);(0,react.useEffect)((function(){isUserInteraction.current||setChips(initialChips)}),[initialChips]);var updateFormValue=(0,react.useCallback)((function(newChips){isUserInteraction.current&&(null!=formProps&&formProps.setFieldValue&&formProps.setFieldValue(fieldName,newChips),setValue&&setValue(fieldName,newChips))}),[formProps,setValue,fieldName]),addChip=(0,react.useCallback)((function(chip){isUserInteraction.current=!0;var newChips=[].concat((0,toConsumableArray.A)(chips),[chip]);setChips(newChips),updateFormValue(newChips),"string"==typeof chip?null==onAddChip||onAddChip(chip):null==onAddChip||onAddChip(chip.text)}),[chips,updateFormValue,onAddChip]),removeChip=(0,react.useCallback)((function(index){isUserInteraction.current=!0;var chipToRemove=chips[index],chipText="string"==typeof chipToRemove?chipToRemove:chipToRemove.text,newChips=chips.filter((function(_,i){return i!==index}));setChips(newChips),updateFormValue(newChips),null==onRemoveChip||onRemoveChip(chipText,index)}),[chips,updateFormValue,onRemoveChip]),removeChipByText=(0,react.useCallback)((function(chipText){isUserInteraction.current=!0;var index=chips.findIndex((function(chip){return("string"==typeof chip?chip:chip.text)===chipText}));if(-1!==index){var newChips=chips.filter((function(_,i){return i!==index}));setChips(newChips),updateFormValue(newChips),null==onRemoveChip||onRemoveChip(chipText,index)}}),[chips,updateFormValue,onRemoveChip]),getChipTexts=(0,react.useCallback)((function(){return chips.map((function(chip){return"string"==typeof chip?chip:chip.text}))}),[chips]),hasErrorChips=chips.some((function(chip){return"object"===(0,esm_typeof.A)(chip)&&chip.hasError})),getErrorMessage=(0,react.useCallback)((function(){var firstError=chips.filter((function(chip){return"object"===(0,esm_typeof.A)(chip)&&chip.hasError})).find((function(chip){return chip.errorMessage}));return(null==firstError?void 0:firstError.errorMessage)||""}),[chips]);return{chips,addChip,removeChip,removeChipByText,getChipTexts,hasErrorChips,getErrorMessage}}({initialChips:chips,fieldName,formProps,setValue:(0,hooks.Sc)().setValue,onAddChip,onRemoveChip}),chipValidation=function useChipValidation(_ref){var validationSchema=_ref.validationSchema,errorMessage=_ref.errorMessage,_ref$allowInvalidChip=_ref.allowInvalidChips,allowInvalidChips=void 0!==_ref$allowInvalidChip&&_ref$allowInvalidChip,minChipLength=_ref.minChipLength,maxChipLength=_ref.maxChipLength;return{createValidatedChip:(0,react.useCallback)((function(chipText){var trimmedText=chipText.trim();if(minChipLength&&trimmedText.length<minChipLength){var message="Chip must be at least ".concat(minChipLength," characters long");if(!allowInvalidChips)throw new Error(message);return{text:trimmedText,hasError:!0,errorMessage:message}}if(maxChipLength&&trimmedText.length>maxChipLength){var _message="Chip must be no more than ".concat(maxChipLength," characters long");if(!allowInvalidChips)throw new Error(_message);return{text:trimmedText,hasError:!0,errorMessage:_message}}if(validationSchema)try{return validationSchema.validateSync(trimmedText),{text:trimmedText,hasError:!1,errorMessage:""}}catch(error){var _message2=errorMessage||error.message||"Invalid value";if(!allowInvalidChips)throw new Error(_message2);return{text:trimmedText,hasError:!0,errorMessage:_message2}}return{text:trimmedText,hasError:!1,errorMessage:""}}),[validationSchema,errorMessage,allowInvalidChips,minChipLength,maxChipLength])}}({validationSchema:chipValidationSchema,errorMessage:chipValidationErrorMessage,allowInvalidChips,minChipLength,maxChipLength}),dropdownLogic=function useDropdownLogic(_ref){var availableOptions=_ref.availableOptions,chipTexts=_ref.chipTexts,containerRef=_ref.containerRef,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.A)(_useState,2),showDropdown=_useState2[0],setShowDropdown=_useState2[1],_useState3=(0,react.useState)([]),_useState4=(0,slicedToArray.A)(_useState3,2),filteredOptions=_useState4[0],setFilteredOptions=_useState4[1],_useState5=(0,react.useState)(""),_useState6=(0,slicedToArray.A)(_useState5,2),selectedOption=_useState6[0],setSelectedOption=_useState6[1],filterOptions=(0,react.useCallback)((function(inputValue){if(0!==availableOptions.length){var filtered=availableOptions.filter((function(option){return option.toLowerCase().includes(inputValue.toLowerCase())&&!chipTexts.includes(option)}));setFilteredOptions(filtered)}}),[availableOptions,chipTexts]),handleInputFocus=(0,react.useCallback)((function(inputValue){availableOptions.length>0&&(inputValue.trim()||filterOptions(""),setShowDropdown(!0))}),[availableOptions.length,filterOptions]),handleInputChange=(0,react.useCallback)((function(inputValue){setSelectedOption(""),filterOptions(inputValue),setShowDropdown(availableOptions.length>0&&inputValue.trim().length>0)}),[filterOptions,availableOptions.length]),navigateOptions=(0,react.useCallback)((function(direction){if(0!==filteredOptions.length){var nextIndex,currentIndex=selectedOption?filteredOptions.indexOf(selectedOption):-1;nextIndex="down"===direction?currentIndex<filteredOptions.length-1?currentIndex+1:0:currentIndex>0?currentIndex-1:filteredOptions.length-1,setSelectedOption(filteredOptions[nextIndex])}}),[filteredOptions,selectedOption]),selectOption=(0,react.useCallback)((function(option){var optionToSelect=option||selectedOption||filteredOptions[0];return optionToSelect?(setShowDropdown(!1),setSelectedOption(""),optionToSelect):null}),[selectedOption,filteredOptions]),closeDropdown=(0,react.useCallback)((function(){setShowDropdown(!1),setSelectedOption("")}),[]);return(0,react.useEffect)((function(){var handleClickOutside=function handleClickOutside(event){containerRef.current&&!containerRef.current.contains(event.target)&&closeDropdown()};return showDropdown&&document.addEventListener("mousedown",handleClickOutside),function(){document.removeEventListener("mousedown",handleClickOutside)}}),[showDropdown,closeDropdown,containerRef]),{showDropdown,filteredOptions,selectedOption,handleInputFocus,handleInputChange,navigateOptions,selectOption,closeDropdown}}({availableOptions,chipTexts:chipManagement.getChipTexts(),containerRef}),handleSelectOption=function handleSelectOption(option){if(allowDuplicates||!chipManagement.getChipTexts().includes(option))try{var valueToValidate=transformToUppercase?option.toUpperCase():option,validatedChip=chipValidation.createValidatedChip(valueToValidate);chipManagement.addChip(validatedChip),setInputValue(""),dropdownLogic.closeDropdown(),setChipError("")}catch(error){allowInvalidChips||setChipError(error instanceof Error?error.message:"Invalid value")}},handleAddCustomValue=(0,react.useCallback)((function(value){if(allowDuplicates||!chipManagement.getChipTexts().includes(value))try{var valueToValidate=transformToUppercase?value.toUpperCase():value,validatedChip=chipValidation.createValidatedChip(valueToValidate);chipManagement.addChip(validatedChip),setInputValue(""),setChipError("")}catch(error){allowInvalidChips||setChipError(error instanceof Error?error.message:"Invalid value")}}),[chipManagement,chipValidation,allowInvalidChips,transformToUppercase,allowDuplicates]),onBlurLogic=function useOnBlurLogic(_ref){var inputValue=_ref.inputValue,disabled=_ref.disabled,allowCustomValues=_ref.allowCustomValues,availableOptions=_ref.availableOptions,minChipLength=_ref.minChipLength,maxChipLength=_ref.maxChipLength,onBlurConfig=_ref.onBlurConfig,onAddCustomValue=_ref.onAddCustomValue,chipValidationSchema=_ref.chipValidationSchema,_ref$allowInvalidChip=_ref.allowInvalidChips,allowInvalidChips=void 0!==_ref$allowInvalidChip&&_ref$allowInvalidChip,validateValue=(0,react.useCallback)((function(value){var trimmedValue=value.trim();if(minChipLength&&trimmedValue.length<minChipLength)return!1;if(maxChipLength&&trimmedValue.length>maxChipLength)return!1;if(chipValidationSchema)try{return chipValidationSchema.validateSync(trimmedValue),!0}catch(_unused){return allowInvalidChips}return!0}),[minChipLength,maxChipLength,chipValidationSchema,allowInvalidChips]);return{handleInputBlur:(0,react.useCallback)((function(){var trimmedValue=inputValue.trim();if(trimmedValue&&!disabled){var behavior=(null==onBlurConfig?void 0:onBlurConfig.behavior)||"add-chip",config=onBlurConfig||{behavior:"add-chip"};switch(behavior){case"add-chip":default:(allowCustomValues||availableOptions.includes(trimmedValue))&&onAddCustomValue(trimmedValue);break;case"add-if-valid":validateValue(trimmedValue)&&onAddCustomValue(trimmedValue);break;case"add-if-available":availableOptions.includes(trimmedValue)&&onAddCustomValue(trimmedValue);break;case"add-if-min-length":var minLength=(null==config?void 0:config.minLength)||minChipLength||1;trimmedValue.length>=minLength&&onAddCustomValue(trimmedValue);case"ignore":}}}),[inputValue,disabled,allowCustomValues,availableOptions,onBlurConfig,validateValue,onAddCustomValue,minChipLength])}}({inputValue,disabled,allowCustomValues,availableOptions,minChipLength,maxChipLength,onBlurConfig,onAddCustomValue:handleAddCustomValue,chipValidationSchema,allowInvalidChips}),handleInputBlur=onBlurLogic.handleInputBlur,keyboardNavigation=function useKeyboardNavigation(_ref){var disabled=_ref.disabled,inputValue=_ref.inputValue,allowCustomValues=_ref.allowCustomValues,chips=_ref.chips,filteredOptions=_ref.filteredOptions,selectedOption=_ref.selectedOption,onAddCustomValue=_ref.onAddCustomValue,onNavigateOptions=_ref.onNavigateOptions,onSelectOption=_ref.onSelectOption,onCloseDropdown=_ref.onCloseDropdown,onRemoveLastChip=_ref.onRemoveLastChip,inputRef=_ref.inputRef;return{handleKeyDown:(0,react.useCallback)((function(e){var _inputRef$current;if(!disabled){var trimmedInput=inputValue.trim();switch(e.key){case"Enter":e.preventDefault(),selectedOption?onSelectOption(selectedOption):filteredOptions.length>0?onSelectOption(filteredOptions[0]):allowCustomValues&&trimmedInput&&onAddCustomValue(trimmedInput);break;case",":case" ":case"Space":allowCustomValues&&trimmedInput&&(e.preventDefault(),onAddCustomValue(trimmedInput));break;case"Escape":onCloseDropdown(),null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.blur();break;case"ArrowDown":e.preventDefault(),onNavigateOptions("down");break;case"ArrowUp":e.preventDefault(),onNavigateOptions("up");break;case"Backspace":!inputValue&&chips.length>0&&(e.preventDefault(),onRemoveLastChip())}}}),[disabled,inputValue,allowCustomValues,chips.length,filteredOptions,selectedOption,onAddCustomValue,onNavigateOptions,onSelectOption,onCloseDropdown,onRemoveLastChip,inputRef])}}({disabled,inputValue,allowCustomValues,chips:chipManagement.chips,filteredOptions:dropdownLogic.filteredOptions,selectedOption:dropdownLogic.selectedOption,onAddCustomValue:handleAddCustomValue,onNavigateOptions:dropdownLogic.navigateOptions,onSelectOption:function onSelectOption(option){var selected=dropdownLogic.selectOption(option);selected&&handleSelectOption(selected)},onCloseDropdown:dropdownLogic.closeDropdown,onRemoveLastChip:function handleRemoveLastChip(){var lastChipIndex=chipManagement.chips.length-1;lastChipIndex>=0&&chipManagement.removeChip(lastChipIndex)},inputRef}),inputPlaceholder=(0,react.useMemo)((function(){return 0===chipManagement.chips.length?placeholder:availableOptions.length>0?searchPlaceholder||searchPlaceholderText:allowCustomValues?typeAndEnterPlaceholderText:noOptionsPlaceholderText}),[chipManagement.chips.length,placeholder,availableOptions.length,searchPlaceholder,searchPlaceholderText,allowCustomValues,typeAndEnterPlaceholderText,noOptionsPlaceholderText]),hasError=chipError||chipManagement.hasErrorChips,errorMessage=chipError||chipManagement.getErrorMessage(),containerClassName=(0,react.useMemo)((function(){return classnames_default()("multi-textarea-chips",className,{"multi-textarea-chips--disabled":disabled,"multi-textarea-chips--error":hasError})}),[className,disabled,hasError]),inputWrapperClassName=(0,react.useMemo)((function(){return classnames_default()("multi-textarea-input-wrapper",{"with-error-styles":hasError})}),[hasError]);return(0,jsx_runtime.jsxs)("div",{className:containerClassName,ref:containerRef,children:[label&&(0,jsx_runtime.jsx)("label",{className:"multi-textarea-chips__label",htmlFor:"".concat(fieldName,"-input"),children:label}),(0,jsx_runtime.jsx)("div",{className:inputWrapperClassName,children:(0,jsx_runtime.jsxs)("div",{className:"multi-textarea-chips__content",children:[chipManagement.chips.map((function(chip,index){var isItem="object"===(0,esm_typeof.A)(chip),text=isItem?chip.text:chip,hasError=!!isItem&&Boolean(chip.hasError);return(0,jsx_runtime.jsx)(Chips.C,{text,withAction:!disabled,onClick:function onClick(){chipManagement.removeChip(index),setTimeout((function(){var _inputRef$current;null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.focus()}),0)},size:"medium",color:hasError?"danger":"primary",type:"accent",disabled,"aria-label":"Remove ".concat(text," chip")},"".concat(text,"-").concat(index))})),(0,jsx_runtime.jsxs)("div",{className:"multi-textarea-chips__input-container",children:[(0,jsx_runtime.jsx)("input",_objectSpread(_objectSpread({id:"".concat(fieldName,"-input")},formProps),{},{autoComplete:"off",ref:inputRef,type:"text",value:inputValue,onChange:function handleInputChange(e){if(!disabled){var value=e.target.value;transformToUppercase&&(value=value.toUpperCase()),setInputValue(value),dropdownLogic.handleInputChange(value)}},onKeyDown:keyboardNavigation.handleKeyDown,onFocus:function handleInputFocus(){dropdownLogic.handleInputFocus(inputValue)},onBlur:handleInputBlur,placeholder:inputPlaceholder,className:"multi-textarea-chips__input",disabled,"aria-describedby":hasError?"".concat(fieldName,"-error"):helperText?"".concat(fieldName,"-helper"):void 0,"aria-invalid":hasError?"true":"false","aria-expanded":dropdownLogic.showDropdown,"aria-autocomplete":"list",role:"combobox"})),dropdownLogic.showDropdown&&dropdownLogic.filteredOptions.length>0&&(0,jsx_runtime.jsx)("div",{className:"multi-textarea-chips__dropdown",role:"listbox","aria-label":"Available options",children:dropdownLogic.filteredOptions.map((function(option){return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("multi-textarea-chips__dropdown-item",{"multi-textarea-chips__dropdown-item--selected":dropdownLogic.selectedOption===option}),onClick:function onClick(){return handleSelectOption(option)},role:"option","aria-selected":dropdownLogic.selectedOption===option,children:[(0,jsx_runtime.jsx)("div",{className:"multi-textarea-chips__radio",children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("multi-textarea-chips__radio-button",{"multi-textarea-chips__radio-button--selected":dropdownLogic.selectedOption===option})})}),(0,jsx_runtime.jsx)("span",{className:"multi-textarea-chips__option-text",children:option})]},option)}))})]})]})}),hasError&&(0,jsx_runtime.jsx)(helperComponents.Kw,{message:errorMessage}),helperText&&!hasError&&(0,jsx_runtime.jsx)("div",{id:"".concat(fieldName,"-helper"),className:"multi-textarea-chips__helper",children:helperText})]})};MultiTextareaWithChipsComponent.displayName="MultiTextareaWithChipsComponent";var MultiTextareaWithChips=(0,react.memo)(MultiTextareaWithChipsComponent);MultiTextareaWithChips.displayName="MultiTextareaWithChips",MultiTextareaWithChipsComponent.__docgenInfo={description:"",methods:[],displayName:"MultiTextareaWithChipsComponent",props:{label:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},chips:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:"string | TChipItem",elements:[{name:"string"},{name:"TChipItem"}]}],raw:"ChipValue[]"},description:"",defaultValue:{value:"[]",computed:!1}},onAddChip:{required:!1,tsType:{name:"signature",type:"function",raw:"(chip: string) => void",signature:{arguments:[{type:{name:"string"},name:"chip"}],return:{name:"void"}}},description:""},onRemoveChip:{required:!1,tsType:{name:"signature",type:"function",raw:"(chipText: string, index: number) => void",signature:{arguments:[{type:{name:"string"},name:"chipText"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},availableOptions:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},allowCustomValues:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},allowDuplicates:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},searchPlaceholder:{required:!1,tsType:{name:"string"},description:""},chipValidationSchema:{required:!1,tsType:{name:"AnySchema"},description:""},chipValidationErrorMessage:{required:!1,tsType:{name:"string"},description:""},allowInvalidChips:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},minChipLength:{required:!1,tsType:{name:"number"},description:""},maxChipLength:{required:!1,tsType:{name:"number"},description:""},searchPlaceholderText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Search and select...'",computed:!1}},transformToUppercase:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},typeAndEnterPlaceholderText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Type and press Enter...'",computed:!1}},noOptionsPlaceholderText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'No more options available'",computed:!1}},fieldName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'skills'",computed:!1}},onBlurConfig:{required:!1,tsType:{name:"OnBlurConfig"},description:""},formProps:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  setFieldValue?: (\n    fieldName: string,\n    value: TFormValue,\n    shouldValidate?: { shouldValidate: boolean }\n  ) => void\n  [key: string]:\n    | TFormValue\n    | ((\n        fieldName: string,\n        value: TFormValue,\n        shouldValidate?: { shouldValidate: boolean }\n      ) => void)\n    | undefined\n}",signature:{properties:[{key:"setFieldValue",value:{name:"signature",type:"function",raw:"(\n  fieldName: string,\n  value: TFormValue,\n  shouldValidate?: { shouldValidate: boolean }\n) => void",signature:{arguments:[{type:{name:"string"},name:"fieldName"},{type:{name:"TFormValue"},name:"value"},{type:{name:"signature",type:"object",raw:"{ shouldValidate: boolean }",signature:{properties:[{key:"shouldValidate",value:{name:"boolean",required:!0}}]}},name:"shouldValidate"}],return:{name:"void"}},required:!1}},{key:{name:"string"},value:{name:"union",raw:"| TFormValue\n| ((\n    fieldName: string,\n    value: TFormValue,\n    shouldValidate?: { shouldValidate: boolean }\n  ) => void)\n| undefined",elements:[{name:"TFormValue"},{name:"unknown"},{name:"undefined"}],required:!0}}]}},description:""}},composes:["IFormCompProps"]}}}]);